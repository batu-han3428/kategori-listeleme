<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">
    <title>Document</title>
    <style>
        .myJstree{
            list-style-image: url(folder.png);
            width: 200px;
        }
        .myJstree ul{
            display:none;
        }
        .myJstree li{
            color:chocolate;
        }
        .myJstree li:hover{
            cursor:pointer;
        }
        .myJstree, .myJstree ul{
            position:relative;
        }
        .ok{
            position:absolute; 
            transform:rotate(270deg); 
            left:-0.50em; 
            color:chocolate;
        }
        .anaDiv{
            width:200px;
            padding-top: 10px;
        }
       
        .form-floating > .form-control{
            height: calc(1.5rem + 2px);
            line-height: 1.25;
            padding: 0.50rem 0.75rem;
            padding-top: 1rem;
            padding-bottom: 1rem;
        }
        .form-floating > label {
            font-size: 90%;
            padding: 0.25rem 0.75rem;
            color:rgb(194, 190, 190);
        }
        .form-floating > .form-control:focus, .form-floating > .form-control:not(:placeholder-shown) {
            padding-top: 1.625rem;
            padding-bottom: 1rem;
        }
        .form-floating > .form-control:focus ~ label,
        .form-floating > .form-control:not(:placeholder-shown) ~ label {
            opacity: 0.65;
            transform: scale(0.85) translateY(-0.3rem) translateX(0.15rem);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="anaDiv">
                    <div class="form-floating mb-3">
                        <input type="text" id="ara" class="form-control" placeholder=".">
                        <label for="ara">Ara</label>
                    </div>
                    <ul class="myJstree">
                        <li><span>Elektronik</span>
                            <ul>
                                <li><span>Akıllı Telefonlar</span>
                                    <ul>
                                        <li><span>Android</span></li>
                                        <li><span>Ios</span>
                                            <ul>
                                                <li><span>Iphone 11</span></li>
                                            </ul>
                                        </li>
                                    </ul>
                                </li>
                                <li><span>Telefon</span></li>
                            </ul>
                        </li>
                        <li><span>Gıda</span></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-/bQdsTh/da6pkI1MST/rWKFNjaCP5gBSY4sEBT38Q/9RBh9AH40zEOg7Hlq2THRZ" crossorigin="anonymous"></script>
    <script>

        $(".myJstree li").click(function (event) {
            event.stopPropagation();
            var a = $(this);
            if($(this).children("ul").html() != undefined){
                
                $(this).children("ul").toggle("slide", function() {
              
                    if($(a).children("ul").css("display") != "none"){
                        $(a).prev().css({
                            "transform":"rotate(0deg)",
                            "transition":"500ms"
                        });
                    }else{
                        $(a).prev().css({
                            "transform":"rotate(270deg)",
                            "transition":"500ms"
                        });
                    }
                });
            }
        });

        $(".myJstree li").each(function(index, element){
            if($(element).children("ul").html() != undefined){       
                $(element).before("<i class='bi bi-caret-down-fill ok'></i>");
            }
        });
        var ad = [];
        $("#ara").keyup(function(){
            var veri = $(this).val().toLowerCase();

            $('.myJstree span').each(function(){
               
                var currentLiText = $(this).text().toLowerCase(),
                    showCurrentLi = currentLiText.indexOf(veri) !== -1; 
                   
             
                if(veri == ""){
                    $(".myJstree ul").hide("slide");
                }else{
                    if(showCurrentLi){
                        ad.push(currentLiText);
                        $(this).parent().not(".myJstree").show("slide");
                    }else{
                        listeUzunluk = ad.length;
                        for(i = 0; i < listeUzunluk; i++) {
                           if($(this).parent().siblings().children("span").text().toLowerCase() != ad[i]){
                                $(this).parent().not(".myJstree").hide("slide");
                           } 
                        }

                    }
                    
                    // $(this).parents("ul").not(".myJstree").toggle(showCurrentLi);
                }
              
                
                // $(this).parent().not(".myJstree").toggle(showCurrentLi);

            });     
            
        });
    </script>
</body>
</html>